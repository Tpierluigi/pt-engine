<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" xmlns:s="library://ns.adobe.com/flex/spark" xmlns:mx="library://ns.adobe.com/flex/mx" xmlns:engine="com.engine.base.*" creationComplete="gestRet()">

	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
	</fx:Declarations>
	<fx:Script>
		<![CDATA[
		import com.engine.base.Applicazione;
		import com.engine.base.Forma;
		import com.engine.base.Rettangolo;
		import com.engine.util.Settings;
		import flash.events.Event;
		import flash.net.FileFilter;
		import flash.net.FileReference;
		import mx.graphics.SolidColor;
		import mx.controls.Alert;
		import spark.primitives.Rect;
		import mx.events.PropertyChangeEvent;
		
		//private var ret:Rettangolo;
		//private var ret2:Rettangolo;
		//
		//private var app:Applicazione;
		//private function prova():void{
				//Settings.fileName = "impostazioni.xml";
				//Settings.xmlData = <settings/>
				//Settings.xmlData.appendChild( app.propertySet);
				//Settings.writeXML();
				//Alert.show("Dati salvati");
		//}
		
		private function gestRet():void{

			
		}

		private function cambia():void 
		{
			var f:FileReference = new FileReference();
			var l:Function = function(e:Event):void{
				f.removeEventListener(Event.COMPLETE, l);
				f.removeEventListener(Event.SELECT, c);
			};
			var c:Function = function(e:Event):void{
				f.addEventListener(Event.COMPLETE, l);
				f.load();
			}
			f.browse([new FileFilter("imagini", "*.jpg;*.png")]);
			f.addEventListener(Event.SELECT, c);
		}
		private function mostra():void 
		{
			Alert.show(app.datiForma.proprieta.toString());
		}
		]]>
	</fx:Script>
	<s:VGroup>
		<s:Button label="salva XML">
		</s:Button>
		<s:Button label="cambia" click="cambia()" />
		<s:Button label="mostra" click="mostra()" />
		<s:Button label="aggancia">
		</s:Button>
	</s:VGroup>
	<engine:Applicazione id="app" x="100" y="100" width="500" height="400">
		<engine:Rettangolo id="ret1" />
		<engine:Rettangolo id="ret2" x="300" y="300" width="100" height="50" />
	</engine:Applicazione>

</s:Application>
